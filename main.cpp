//// Created by Sesen Yonas on 5/31/22.//#include "Data.h"#include "Tree.h"#include <iostream>#include <fstream>#include <istream>#include <string>#include <map>#include <vector>#include <cstring>#include <bits/stdc++.h>using std::fstream;using std::sort;using std::vector;using std::string;using std::istream;using std::ofstream;using std::ifstream;using std::cout;using std::cin;using std::getline;using std::endl;using std::map;using std::iostream;bool Compare(Data val1, Data val2){    if((val1.GetFreqeuncy() == val2.GetFreqeuncy())){        return (val1.GetLetter() > val2.GetLetter());    }    else{        return (val1.GetFreqeuncy() > val2.GetFreqeuncy());    }}int TableMaker(string file, vector<Data>& TableInfo){    ifstream input;    string line;    string c;    char character;    map<string,int> myMap;        if(file.empty()){            cout << "Could not find file." << endl;            return -1;        }        input.open(file);        if(!input.is_open()){            cout << "Could not open file." << endl;            return -1;        }    input.get(character);    do {        string newChar = "";        newChar += character;        if(character>0){            if(character != '\r' && character != '\n' ) {                if(myMap.count(newChar) > 0){                    myMap.at(newChar)++;                }                else{                    myMap.insert(std::pair<string,int>(newChar,1));                }            }            else if(character == '\r'){                if(myMap.count("CR") > 0){                    myMap.at("CR")++;                }                else{                    myMap.insert(std::pair<string,int>("CR",1));                }            }            else if(character == '\n'){                if(myMap.count("LF") > 0){                    myMap.at("LF")++;                }                else{                    myMap.insert(std::pair<string,int>("LF",1));                }            }        }        input.get(character);    } while(!input.eof());    for(std::pair<string,int> i: myMap){        TableInfo.push_back(Data(i.second,i.first));    }    sort(TableInfo.begin(),TableInfo.end(),Compare);    return 0;}int main (int argc, char* argv[]){    vector<Data> TableInfo;    if(argc >3 && strcmp("-encode",argv[1]) ==0 ){        string file(argv[2]);        string outfile(argv[3]);        TableMaker(file,TableInfo);        Tree test;        vector<Node*>node;        test.DataToNode(TableInfo, node);        vector<Encoding> encodeData;        test.TreeTable(encodeData);        string bitline;        char character;        int charCount =0;        ifstream input;        if(file.empty()){            cout << "Could not find file." << endl;            return -1;        }        input.open(file);        if(!input.is_open()){            cout << "Could not open file." << endl;            return -1;        }        input.get(character);        do{            string newChar = "";            newChar = character;            if(character>0){                if(character != '\r' && character != '\n'){                    for (Encoding i:encodeData){                        if (i.GetChar() == newChar) {                            bitline += i.GetBits();                            break;                        }                    }                }                else if(character == '\r'){                    for(Encoding i: encodeData){                        if(i.GetChar() == "CR"){                                bitline += i.GetBits();                                break;                        }                    }                }                else if(character == '\n'){                    for(Encoding i: encodeData){                        if(i.GetChar() == "LF"){                                bitline += i.GetBits();                                break;                        }                    }                }            }            charCount++;            input.get(character);        }while(!input.eof() && !input.fail());////        ofstream output;        if(outfile.empty()){            cout << "Could not find file." << endl;            return -1;        }        output.open(outfile);        if(!output.is_open()){            cout << "Could not open file." << endl;            return -1;        }        else {            output << bitline << endl;            output.close();            cout << charCount  << " bytes written" << endl;        }    }    if(argc >3 && strcmp("-single",argv[1]) ==0) {        string file(argv[2]);        const char* letter = argv[3];        TableMaker(file,TableInfo);        Tree test;        vector<Node*> node;        test.DataToNode(TableInfo, node);        vector<Encoding> encodeData;        test.TreeTable(encodeData);        test.SingleChar(encodeData,letter);    }    if(argc >2 && strcmp("-frequency",argv[1])==0){        string file(argv[2]);        TableMaker(file,TableInfo);        for(Data x: TableInfo){            cout << "{element: " << x.GetLetter() << ", frequency: " << x.GetFreqeuncy() << "}" << endl;        }    }    if(argc >2 && strcmp("-endcoding-table",argv[1]) ==0){        string file(argv[2]);        TableMaker(file,TableInfo);        Tree test;        vector<Node*>node;        test.DataToNode(TableInfo, node);        vector<Encoding> encodeData;        test.TreeTable(encodeData);        for(Encoding x: encodeData){            cout << "{key: " << x.GetChar() << ", code: " << x.GetBits() << "}" << endl;        }    }    return 0;};